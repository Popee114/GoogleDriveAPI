{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/BondarVA/Documents/\\u0422\\u0410\\u041F \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/\\u041C\\u0430\\u044F\\u043A/Document Handler/DocumentHandler.Client/DocumentHandler/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { RequestService } from './../services/request.service';\nimport { forkJoin } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../services/request.service\";\nimport * as i2 from \"@angular/platform-browser\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"primeng/button\";\nimport * as i5 from \"primeng/dialog\";\nimport * as i6 from \"primeng/api\";\n\nfunction AppComponent_ng_template_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function AppComponent_ng_template_23_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.closeModal(true);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(1, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function AppComponent_ng_template_23_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.closeModal(false);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class AppComponent {\n  constructor(requestService, sanitizer) {\n    this.requestService = requestService;\n    this.sanitizer = sanitizer;\n    this.title = 'DocumentHandler';\n    this.firstId = 2;\n    this.secondId = 3;\n    this.isUserExpert = false;\n    this.displayModal = false;\n    this.firstDocLink = this.sanitize('');\n    this.secondDocLink = this.sanitize('');\n    this.saveChanges = false;\n    this.myForm = new FormGroup({\n      'firstDocId': new FormControl(this.firstId, Validators.required),\n      'secondDocId': new FormControl(this.secondId, Validators.required),\n      'isUserExpert': new FormControl(this.isUserExpert)\n    });\n  }\n\n  ngOnInit() {\n    this.myForm.valueChanges.subscribe(() => this.onFormChanged());\n  }\n\n  onSubmit() {\n    this.displayModal = true;\n    this.openDocs(this.firstId, this.secondId, this.isUserExpert);\n  }\n\n  closeModal(saveChanges) {\n    this.saveChanges = saveChanges;\n    this.closeDocs(this.firstId, this.firstDocId, this.secondId, this.secondDocId, this.saveChanges);\n  }\n\n  onModalClosed() {}\n\n  openDocs(firstId, secondId, isExpert) {\n    this.firstDocLink = this.sanitize('assets/loading-page.html');\n    this.secondDocLink = this.sanitize('assets/loading-page.html');\n    forkJoin({\n      firstDocument: this.requestService.openDocument(firstId, isExpert),\n      secondDocument: this.requestService.openDocument(secondId, isExpert)\n    }).subscribe(data => {\n      this.firstDocLink = this.sanitize(data.firstDocument.link);\n      this.firstDocId = data.firstDocument.documentId;\n      this.secondDocLink = this.sanitize(data.secondDocument.link);\n      this.secondDocId = data.secondDocument.documentId;\n    }, () => {\n      this.firstDocLink = this.sanitize('assets/error-page.html');\n      this.secondDocLink = this.sanitize('assets/error-page.html');\n    });\n  }\n\n  closeDocs(firstId, firstDocId, secondId, secondDocId, saveChanges) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.firstDocLink = _this.sanitize('assets/loading-page.html');\n      _this.secondDocLink = _this.sanitize('assets/loading-page.html');\n      yield setTimeout(() => {\n        _this.displayModal = false;\n      }, 5000);\n      forkJoin({\n        firstDocument: _this.requestService.closeDocument(firstId, firstDocId, saveChanges),\n        secondDocument: _this.requestService.closeDocument(secondId, secondDocId, saveChanges)\n      }).subscribe(() => {});\n    })();\n  }\n\n  onFormChanged() {\n    var _a, _b, _c;\n\n    this.firstId = (_a = this.myForm.get('firstDocId')) === null || _a === void 0 ? void 0 : _a.value;\n    this.secondId = (_b = this.myForm.get('secondDocId')) === null || _b === void 0 ? void 0 : _b.value;\n    this.isUserExpert = (_c = this.myForm.get('isUserExpert')) === null || _c === void 0 ? void 0 : _c.value;\n  }\n\n  sanitize(url) {\n    return this.sanitizer.bypassSecurityTrustResourceUrl(url);\n  }\n\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.RequestService), i0.ɵɵdirectiveInject(i2.DomSanitizer));\n};\n\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  features: [i0.ɵɵProvidersFeature([RequestService])],\n  decls: 24,\n  vars: 9,\n  consts: [[\"novalidate\", \"\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"name\", \"firstId\", \"formControlName\", \"firstDocId\"], [\"name\", \"secondId\", \"formControlName\", \"secondDocId\"], [\"id\", \"isExpert\", \"type\", \"checkbox\", \"name\", \"isExpert\", \"formControlName\", \"isUserExpert\"], [\"type\", \"submit\", \"pButton\", \"\", \"label\", \"Show docs\", 1, \"btn\", \"show-btn\", 3, \"disabled\"], [\"header\", \"\\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440 \\u0434\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432\", 3, \"resizable\", \"visible\", \"modal\", \"draggable\", \"closable\", \"visibleChange\", \"onHide\"], [1, \"wrapper\"], [1, \"iFramed\"], [1, \"left\"], [3, \"src\"], [1, \"right\"], [\"pTemplate\", \"footer\"], [\"pButton\", \"\", \"icon\", \"pi pi-check\", \"label\", \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F\", 1, \"btn\", 3, \"click\"], [\"pButton\", \"\", \"icon\", \"pi pi-times\", \"label\", \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\", 1, \"btn\", 3, \"click\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function AppComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"label\");\n      i0.ɵɵtext(3, \"Id \\u043F\\u0435\\u0440\\u0432\\u043E\\u0433\\u043E \\u0434\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0430:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(4, \"input\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 1);\n      i0.ɵɵelementStart(6, \"label\");\n      i0.ɵɵtext(7, \"Id \\u0432\\u0442\\u043E\\u0440\\u043E\\u0433\\u043E \\u0434\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0430:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"input\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 1);\n      i0.ɵɵelementStart(10, \"label\");\n      i0.ɵɵtext(11, \"\\u042F \\u044D\\u043A\\u0441\\u043F\\u0435\\u0440\\u0442:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"input\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 1);\n      i0.ɵɵelement(14, \"button\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"p-dialog\", 6);\n      i0.ɵɵlistener(\"visibleChange\", function AppComponent_Template_p_dialog_visibleChange_15_listener($event) {\n        return ctx.displayModal = $event;\n      })(\"onHide\", function AppComponent_Template_p_dialog_onHide_15_listener() {\n        return ctx.onModalClosed();\n      });\n      i0.ɵɵelementStart(16, \"div\", 7);\n      i0.ɵɵelementStart(17, \"div\", 8);\n      i0.ɵɵelementStart(18, \"div\", 9);\n      i0.ɵɵelement(19, \"iframe\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\", 8);\n      i0.ɵɵelementStart(21, \"div\", 11);\n      i0.ɵɵelement(22, \"iframe\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(23, AppComponent_ng_template_23_Template, 2, 0, \"ng-template\", 12);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formGroup\", ctx.myForm);\n      i0.ɵɵadvance(14);\n      i0.ɵɵproperty(\"disabled\", ctx.myForm.invalid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"resizable\", false)(\"visible\", ctx.displayModal)(\"modal\", true)(\"draggable\", false)(\"closable\", false);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"src\", ctx.firstDocLink, i0.ɵɵsanitizeResourceUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"src\", ctx.secondDocLink, i0.ɵɵsanitizeResourceUrl);\n    }\n  },\n  directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i3.CheckboxControlValueAccessor, i4.ButtonDirective, i5.Dialog, i6.PrimeTemplate],\n  styles: [\"form[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  margin-right: -50%;\\n  transform: translate(-50%, -50%);\\n  width: 350px;\\n  border: 3px solid #1e5588;\\n  padding-left: 1rem;\\n  padding-right: 1rem;\\n  border-radius: 0.5rem;\\n  font-size: 25px;\\n}\\nform[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%] {\\n  margin-top: 1rem;\\n  margin-bottom: 1rem;\\n}\\nform[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  margin: 1px;\\n  width: 50px;\\n  float: right;\\n  border: 1px solid;\\n  font-size: 25px;\\n}\\nform[_ngcontent-%COMP%]   #isExpert[_ngcontent-%COMP%] {\\n  width: 30px;\\n  height: 30px;\\n}\\nform[_ngcontent-%COMP%]   input.ng-touched.ng-invalid[_ngcontent-%COMP%] {\\n  border: solid red 2px;\\n}\\n.iFramed[_ngcontent-%COMP%] {\\n  display: inline-block;\\n}\\n.iFramed[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%] {\\n  float: left;\\n  margin-right: 5px;\\n}\\n.iFramed[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%] {\\n  float: right;\\n  margin-left: 5px;\\n}\\n.wrapper[_ngcontent-%COMP%] {\\n  min-width: 1300px;\\n}\\niframe[_ngcontent-%COMP%] {\\n  border: 3px solid #1e5588;\\n  border-radius: 0.5rem;\\n  width: 650px;\\n  height: 600px;\\n}\\n.show-btn[_ngcontent-%COMP%] {\\n  width: -webkit-fill-available;\\n  width: stretch;\\n}\\n.btn[_ngcontent-%COMP%] {\\n  background-color: #1e5588;\\n}\\n.btn[_ngcontent-%COMP%]:hover {\\n  background-color: #324a5e;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxrQkFBQTtFQUNBLGdDQUFBO0VBQ0EsWUFBQTtFQUNBLHlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxtQkFBQTtFQUNBLHFCQUFBO0VBQ0EsZUFBQTtBQUNGO0FBQ0U7RUFDRSxnQkFBQTtFQUNBLG1CQUFBO0FBQ0o7QUFDSTtFQUNFLFdBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0EsZUFBQTtBQUNOO0FBR0U7RUFDRSxXQUFBO0VBQ0EsWUFBQTtBQURKO0FBSUU7RUFDRSxxQkFBQTtBQUZKO0FBTUE7RUFDRSxxQkFBQTtBQUhGO0FBS0U7RUFDRSxXQUFBO0VBQ0EsaUJBQUE7QUFISjtBQU1FO0VBQ0UsWUFBQTtFQUNBLGdCQUFBO0FBSko7QUFRQTtFQUNFLGlCQUFBO0FBTEY7QUFRQTtFQUNFLHlCQUFBO0VBQ0EscUJBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtBQUxGO0FBUUE7RUFDRSw2QkFBQTtFQUFBLGNBQUE7QUFMRjtBQVFBO0VBQ0UseUJBQUE7QUFMRjtBQVFBO0VBQ0UseUJBQUE7QUFMRiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJmb3JtIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiA1MCU7XHJcbiAgbGVmdDogNTAlO1xyXG4gIG1hcmdpbi1yaWdodDogLTUwJTtcclxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcclxuICB3aWR0aDogMzUwcHg7XHJcbiAgYm9yZGVyOiAzcHggc29saWQgIzFlNTU4ODtcclxuICBwYWRkaW5nLWxlZnQ6IDFyZW07XHJcbiAgcGFkZGluZy1yaWdodDogMXJlbTtcclxuICBib3JkZXItcmFkaXVzOiAwLjVyZW07XHJcbiAgZm9udC1zaXplOiAyNXB4O1xyXG5cclxuICAuZm9ybS1ncm91cCB7XHJcbiAgICBtYXJnaW4tdG9wOiAxcmVtO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMXJlbTtcclxuXHJcbiAgICBpbnB1dCB7XHJcbiAgICAgIG1hcmdpbjogMXB4O1xyXG4gICAgICB3aWR0aDogNTBweDtcclxuICAgICAgZmxvYXQ6IHJpZ2h0O1xyXG4gICAgICBib3JkZXI6IDFweCBzb2xpZDtcclxuICAgICAgZm9udC1zaXplOiAyNXB4O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgI2lzRXhwZXJ0IHtcclxuICAgIHdpZHRoOiAzMHB4O1xyXG4gICAgaGVpZ2h0OiAzMHB4O1xyXG4gIH1cclxuXHJcbiAgaW5wdXQubmctdG91Y2hlZC5uZy1pbnZhbGlkIHtcclxuICAgIGJvcmRlcjogc29saWQgcmVkIDJweDtcclxuICB9XHJcbn1cclxuXHJcbi5pRnJhbWVkIHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcblxyXG4gIC5sZWZ0IHtcclxuICAgIGZsb2F0OiBsZWZ0O1xyXG4gICAgbWFyZ2luLXJpZ2h0OiA1cHg7XHJcbiAgfVxyXG5cclxuICAucmlnaHQge1xyXG4gICAgZmxvYXQ6IHJpZ2h0O1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxuICB9XHJcbn1cclxuXHJcbi53cmFwcGVyIHtcclxuICBtaW4td2lkdGg6IDEzMDBweDtcclxufVxyXG5cclxuaWZyYW1lIHtcclxuICBib3JkZXI6IDNweCBzb2xpZCAjMWU1NTg4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDAuNXJlbTtcclxuICB3aWR0aDogNjUwcHg7XHJcbiAgaGVpZ2h0OiA2MDBweDtcclxufVxyXG5cclxuLnNob3ctYnRuIHtcclxuICB3aWR0aDogc3RyZXRjaDtcclxufVxyXG5cclxuLmJ0biB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFlNTU4ODtcclxufVxyXG5cclxuLmJ0bjpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzMyNGE1ZTtcclxufVxyXG4iXX0= */\"]\n});","map":{"version":3,"sources":["C:\\Users\\BondarVA\\Documents\\ТАП проекты\\Маяк\\Document Handler\\DocumentHandler.Client\\DocumentHandler\\src\\app\\app.component.ts","C:\\Users\\BondarVA\\Documents\\ТАП проекты\\Маяк\\Document Handler\\DocumentHandler.Client\\DocumentHandler\\src\\app\\app.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { RequestService } from './../services/request.service';\nimport { DocumentInfo } from './../models/document-info';\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\nimport { forkJoin } from 'rxjs';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n  providers: [RequestService]\n})\nexport class AppComponent implements OnInit{\n  public title = 'DocumentHandler';\n\n  public firstId: number = 2;\n\n  public secondId: number = 3;\n\n  public isUserExpert: boolean = false;\n\n  public displayModal = false;\n\n  public firstDocLink: SafeResourceUrl = this.sanitize('');\n\n  public secondDocLink: SafeResourceUrl = this.sanitize('');\n\n  public firstDocId!: string;\n\n  public secondDocId!: string;\n\n  public saveChanges: boolean = false;\n\n  constructor(private readonly requestService: RequestService,private sanitizer: DomSanitizer) {}\n\n  public ngOnInit(): void {\n    this.myForm.valueChanges.subscribe(() => this.onFormChanged());\n  }\n\n  public myForm: FormGroup = new FormGroup({\n    'firstDocId': new FormControl(this.firstId, Validators.required),\n    'secondDocId': new FormControl(this.secondId, Validators.required),\n    'isUserExpert': new FormControl(this.isUserExpert)\n  });\n\n  public onSubmit(): void {\n    this.displayModal = true;\n    this.openDocs(this.firstId, this.secondId, this.isUserExpert);\n  }\n\n  public closeModal(saveChanges: boolean): void {\n    this.saveChanges = saveChanges;\n    this.closeDocs(this.firstId, this.firstDocId, this.secondId, this.secondDocId, this.saveChanges);\n  }\n\n  public onModalClosed(): void {\n\n  }\n\n  private openDocs(firstId: number, secondId: number, isExpert: boolean): void {\n    this.firstDocLink = this.sanitize('assets/loading-page.html');\n    this.secondDocLink = this.sanitize('assets/loading-page.html');\n    forkJoin(\n      {\n        firstDocument: this.requestService.openDocument<DocumentInfo>(firstId, isExpert),\n        secondDocument: this.requestService.openDocument<DocumentInfo>(secondId, isExpert)\n      }\n    ).subscribe(\n      (data) => {\n        this.firstDocLink = this.sanitize(data.firstDocument.link);\n        this.firstDocId = data.firstDocument.documentId;\n        this.secondDocLink = this.sanitize(data.secondDocument.link);\n        this.secondDocId = data.secondDocument.documentId;\n      },\n      () => {\n        this.firstDocLink = this.sanitize('assets/error-page.html');\n        this.secondDocLink = this.sanitize('assets/error-page.html');\n      }\n    )\n  }\n\n  private async closeDocs(firstId: number, firstDocId: string, secondId: number, secondDocId: string, saveChanges: boolean) {\n    this.firstDocLink = this.sanitize('assets/loading-page.html');\n    this.secondDocLink = this.sanitize('assets/loading-page.html');\n    await setTimeout(() => {\n      this.displayModal = false;\n    }, 5000);\n    forkJoin(\n      {\n        firstDocument: this.requestService.closeDocument(firstId, firstDocId, saveChanges),\n        secondDocument: this.requestService.closeDocument(secondId, secondDocId, saveChanges)\n      }\n    ).subscribe(\n      ()=>{ }\n    );\n  }\n\n  private onFormChanged(): void {\n    this.firstId = this.myForm.get('firstDocId')?.value;\n    this.secondId = this.myForm.get('secondDocId')?.value;\n    this.isUserExpert = this.myForm.get('isUserExpert')?.value;\n  }\n\n  private sanitize(url: string): SafeResourceUrl {\n    return this.sanitizer.bypassSecurityTrustResourceUrl(url);\n  }\n}\n","<form [formGroup]=\"myForm\" novalidate (ngSubmit)=\"onSubmit()\">\n  <div class=\"form-group\">\n    <label>Id первого документа:</label>\n    <input name=\"firstId\" formControlName=\"firstDocId\" />\n  </div>\n  <div class=\"form-group\">\n    <label>Id второго документа:</label>\n    <input name=\"secondId\" formControlName=\"secondDocId\" />\n  </div>\n  <div class=\"form-group\">\n    <label>Я эксперт:</label>\n    <input id=\"isExpert\" type=\"checkbox\" name=\"isExpert\" formControlName=\"isUserExpert\" />\n  </div>\n  <div class=\"form-group\">\n    <button class=\"btn show-btn\" type=\"submit\" pButton label=\"Show docs\" [disabled]=\"myForm.invalid\"></button>\n  </div>\n</form>\n<p-dialog header=\"Просмотр документов\"\n          [resizable]=\"false\"\n          [(visible)]=\"displayModal\"\n          [modal]=\"true\"\n          [draggable]=\"false\"\n          [closable]=\"false\"\n          (onHide)=\"onModalClosed()\">\n\n  <div class=\"wrapper\">\n    <div class=\"iFramed\">\n      <div class=\"left\">\n        <iframe [src]=\"firstDocLink\"></iframe>\n      </div>\n    </div>\n\n    <div class=\"iFramed\">\n      <div class=\"right\">\n        <iframe [src]=\"secondDocLink\"></iframe>\n      </div>\n    </div>\n  </div>\n\n  <ng-template pTemplate=\"footer\">\n      <button class=\"btn\" pButton icon=\"pi pi-check\" (click)=\"closeModal(true)\" label=\"Сохранить изменения\"></button>\n      <button class=\"btn\" pButton icon=\"pi pi-times\" (click)=\"closeModal(false)\" label=\"Отменить\"></button>\n  </ng-template>\n</p-dialog>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}